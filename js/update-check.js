(function(){const H='APP_REMOTE_HASH',L='APP_LAST_CHECK',M=30;function h(s){let x=0;for(let i=0;i<s.length;i++){x=((x<<5)-x)+s.charCodeAt(i);x|=0}return'h'+(x>>>0).toString(16)}async function f(){try{let r=await fetch('index.html?chk='+Date.now(),{cache:'no-cache'});return h(await r.text())}catch(e){return null}}function s(k,v){try{localStorage.setItem(k,v)}catch(e){}}function g(k){try{return localStorage.getItem(k)}catch(e){return null}}function p(){const ov=document.createElement('div');ov.style.cssText='position:fixed;inset:0;background:rgba(0,0,0,.35);display:flex;align-items:center;justify-content:center;z-index:9998;';const card=document.createElement('div');card.style.cssText='background:#fff;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.25);padding:18px 16px;width:min(90%,360px);font-size:15px;text-align:center;color:#111';const t=document.createElement('div');t.textContent='새 버전이 있습니다. 지금 업데이트할까요?';t.style.margin='6px 0 14px';const row=document.createElement('div');row.style.cssText='display:flex;gap:10px;justify-content:center';const ok=document.createElement('button');ok.textContent='업데이트';ok.style.cssText='padding:10px 14px;border-radius:12px;border:none;background:#1565c0;color:#fff;font-weight:700;';const no=document.createElement('button');no.textContent='나중에';no.style.cssText='padding:10px 14px;border-radius:12px;border:1px solid #ddd;background:#fafafa;color:#333;';row.appendChild(no);row.appendChild(ok);card.appendChild(t);card.appendChild(row);ov.appendChild(card);no.onclick=()=>ov.remove();ok.onclick=()=>{ov.remove();try{(window.__LOTTO_FORCE_REFRESH||(()=>{}))();}catch(e){}};document.body.appendChild(ov)}async function c(force){const last=parseInt(g(L)||'0',10),now=Date.now();if(!force&&(now-last)<M*60*1000)return;s(L,String(now));const hash=await f();if(!hash)return;const prev=g(H);if(prev&&prev!==hash){document.readyState==='loading'?document.addEventListener('DOMContentLoaded',p):p()}s(H,hash)}window.__LOTTO_CHECK_UPDATE=()=>c(true);c(true);setInterval(c,M*60*1000)})();